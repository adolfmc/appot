package cn.licoy.wdog.core.controller.appot;import cn.licoy.wdog.common.annotation.SysLogs;import cn.licoy.wdog.common.bean.ResponseCode;import cn.licoy.wdog.common.bean.ResponseResult;import cn.licoy.wdog.common.controller.AppotBaseController;import cn.licoy.wdog.core.dto.appot.FavoritesAddDTO;import cn.licoy.wdog.core.entity.appot.Favorites;import cn.licoy.wdog.core.entity.appot.Venue;import cn.licoy.wdog.core.entity.appot.WechatUser;import cn.licoy.wdog.core.service.appot.FavoritesService;import cn.licoy.wdog.core.service.appot.VenueService;import cn.licoy.wdog.core.service.appot.WechatUserService;import io.swagger.annotations.Api;import com.alibaba.fastjson.JSONObject;import io.swagger.annotations.ApiOperation;import io.swagger.annotations.ApiParam;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.validation.annotation.Validated;import org.springframework.web.bind.annotation.PostMapping;import org.springframework.web.bind.annotation.RequestBody;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;import java.util.ArrayList;import java.util.Date;import java.util.List;/** * @author mc * @version Fri Dec 18 19:07:13 2020 */@RestControllerpublic class FavoritesController  extends AppotBaseController{   @Autowired   private FavoritesService service;   @Autowired   private WechatUserService wechatUserService;   @Autowired   private VenueService venueService;   public FavoritesService getService() {      return service;   }   @RequestMapping(value = {"/saveFavorites"})   @ApiOperation(value = "saveFavorites")   @SysLogs("saveFavorites")   public ResponseResult saveFavorites(@RequestBody @Validated @ApiParam(value = "saveFavorites") FavoritesAddDTO addDTO){       JSONObject jsonObject = null;       service.saveFavorites(jsonObject);   return ResponseResult.e(ResponseCode.OK,jsonObject);   }   @RequestMapping(value = {"/favorites"})   public ResponseResult favorites(Favorites favorites){      Favorites fv = service.isFavorites(favorites);      if(fv.getStatus()==null){         WechatUser wechatUser = wechatUserService.getWechatUserByMobile(favorites.getMobile()) ;         favorites.setId(null);         favorites.setUserId(wechatUser.getId());         favorites.setCreateDate(new Date());         service.insertOrUpdate(favorites);      }else{         fv.setStatus(favorites.getStatus());         service.insertOrUpdate(fv);      }      return ResponseResult.e(ResponseCode.OK,favorites);   }   @RequestMapping(value = {"/isFavorites"})   public ResponseResult isFavorites(Favorites favorites){      Favorites fv = service.isFavorites(favorites);      return ResponseResult.e(ResponseCode.OK,fv);   }}